!function(){var n=n||this||window||Function("return this")(),i=n.nx||require("next-js-core2"),e=require("next-file-upload"),t=require("next-weibo-to-pics"),o="/weibo_api/interface/pic_upload.php",r=i.declare("nx.WeiboOss",{methods:{init:function(n,i){this._token=n,this._options=i,this.initToken()},initToken:function(){var i=this._token;"string"!=typeof token&&(i=token.find(function(n){return n.indexOf("SUB=")>-1})),n.document.cookie=i.split(";")[0]},process:function(n,i,e){var o=JSON.parse(n.split("\n")[2]),r=o.data;if(r.count>0){i(t(r.pics).map(function(n){return n.type="g"===n.pid.charAt(21)?"gif":"jpg",n.url=["https://ws2.sinaimg.cn","/large/",n.pid,".",n.type].join(""),n}))}else e(response)},upload:function(n){var i=this;return new Promise(function(t,r){e(o,{pic1:n}).then(function(n){i.process(n,t,r)})})},uploads:function(n){var t=this,r={};return i.slice(n).forEach(function(n,i){r["pic"+i+1]=n}),new Promise(function(n,i){e(o,r).then(function(e){t.process(e,n,i)})})}}});"undefined"!=typeof module&&module.exports&&(module.exports=r)}();